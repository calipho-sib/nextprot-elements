<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="protein-overview.html">
<link rel="import" href="isoform-selector.html">
<link rel="import" href="triple-viewer.html">
<link rel="import" href="generic-annotation-section.html">
<link rel="import" href="keywords-section.html">
<link rel="import" href="xrefs-section.html">
<link rel="import" href="nextprot-elements-shared-styles.html">
<link rel="import" href="expression-section.html">

<!--
`expression-view`
View listing protein expression view.
@demo demo/expression-view-demo.html
-->
<dom-module id="expression-view">
  <template>
    <style include="nextprot-elements-shared-styles">
      :host {
        display: block;
        background:#f8f8f8;
        overflow-y: auto;
      }

      #nxOntologicalBrowser {
        padding: 10px;
      }

      .ontological-term {
        padding-left: 10px;
        margin: 1px;
        background-color: #f8f8f8;
        border-width: 1px;
        border-style: solid;
        border-color: #dddddd;
      }

    </style>
    <div class="row">
      <div id="nxOverview" class="col-md-12">
        <protein-overview nx-config="[[nxConfig]]"></protein-overview>
      </div>
    </div>
    <div id="nxPositionalAnnotations" class="row nxSection">
      <generic-annotation-section id="expressionInfoElement" section="expressionInfo" gold-only="[[nxConfig.goldOnly]]" categories='["EXPRESSION-INFO"]' nx-config="[[nxConfig]]" count="{{expressionInfoCount}}"></generic-annotation-section>
    </div>
    <div id="nxOntologicalBrowser" class="row nxSection">
      <template is="dom-repeat" items="[[ontologicalBrowserTerms]]" as="term">
        <div class="col-md-3">
          <div class="ontological-term"><a href="#{{term}}">[[term]]</a></div>
        </div>
      </template>
    </div>
    <div id="nxExpressionAnnotations" class="row nxSection">
      <expression-section id="expressionSection" section="expressionSection" gold-only="[[nxConfig.goldOnly]]" nx-config="[[nxConfig]]"></expression-section>
    </div>
    <div id="noDataWarning" class='alert alert-warning noData' hidden>There is no expression information available in neXtProt for [[nxConfig.entry]].
      Suggestions for updates are welcome! Please <a href='mailto:support@nextprot.org'>contact us</a>.
    </div>
    <div class="row">
      <div id="nxXrefs" class="col-md-12">
        <xrefs-section categories='["BindingDB","DIP","IntAct","MINT","STRING","SignaLink","BioGrid","SIGNOR"]' nx-config="[[nxConfig]]" count="{{xrefsCount}}">
        </xrefs-section>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is: 'expression-view',
      properties: {
        nxConfig: {
          type: Object,
          value: {}
        },
        ontologicalBrowserTerms: {
          type: Array,
          value: ["Alimentary system", "Cardiovascular system", "Dermal system", "Endocryne system", "Exocrine system",
                  "Hemolymphoid and immune system", "Musculoskeletal system", "Nervous system", "Reproductive system", "Respiratory system",
                  "Urinary system", "Sense organ", "Body part", "Tissue", "Cell type", "Fluid and secretion", "Gestational structure"]
        },
        annotationsCount: {
          type: Number,
          value: -1,
          observer: "_checkAnnotations"
        },
        positionalAnnotationsCount: {
          type: Number,
          value: -1,
          observer: "_checkAnnotations"
        },
        keywordsCount: {
          type: Number,
          observer: "_checkKeywords"
        },
        xrefsCount: {
          type: Number,
          observer: "_checkXrefs"
        }
      },
      _checkAnnotations: function(){
        if(!this.annotationsCount) this.$.nxExpressionAnnotations.hidden=true;
        else this.$.nxExpressionAnnotations.hidden=false;
        if(!this.positionalAnnotationsCount) this.$.nxPositionalAnnotations.hidden=true;
        else this.$.nxPositionalAnnotations.hidden=false;
        if(this.annotationsCount===0 && this.positionalAnnotationsCount===0) this.$.noDataWarning.hidden=false;
        else this.$.noDataWarning.hidden=true;
      },
      _checkKeywords: function(){
        this.keywordsCount===0 ? this.$.nxKeywords.hidden=true : this.$.nxKeywords.hidden=false;
      },
      _checkXrefs: function(){
        this.xrefsCount===0 ? this.$.nxXrefs.hidden=true : this.$.nxXrefs.hidden=false;
      }
    });
  </script>
</dom-module>