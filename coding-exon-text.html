<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">
<link rel="import" href="external-scripts.html">
<!--
`coding-exon-text`
Coding exon text demo

@demo demo/coding-exon-text-demo.html
-->
<dom-module id="coding-exon-text">
    <template>
        <style>
            .translated-from-exon {
                color: red;
            }
        </style>
        <template is="dom-if" if="[[data.firstAminoAcid]]">
            <span>[[firstTranslatedAminoAcid.codonNucsPreviousExon]]</span><span class="translated-from-exon"><b>[[firstTranslatedAminoAcid.codonNucsCurrentExon]]</b></span><span class="small">[[data.firstAminoAcid.position]]</span>
            <span>-</span>
            <span class="translated-from-exon"><b>[[lastTranslatedAminoAcid.codonNucsCurrentExon]]</b></span><span>[[lastTranslatedAminoAcid.codonNucsNextExon]]</span><span class="small">[[data.lastAminoAcid.position]]</span>
        </template>
    </template>
    <script>
        Polymer({
            is: 'coding-exon-text',
            properties: {
                data: {
                    type: Object
                },
                firstTranslatedAminoAcid: {
                    type: Object
                },
                lastTranslatedAminoAcid: {
                    type: Object
                }
            },
            attached: function() {
                this._init();
            },
            _init: function() {

                if (this.data.firstAminoAcid) {

                    var firstPhase = this.data.firstAminoAcid.phase;
                    var lastPhase = this.data.lastAminoAcid.phase;

                    this.firstTranslatedAminoAcid = {
                        "codonNucsCurrentExon":  this.data.firstAminoAcid.code.substring(firstPhase),
                        "codonNucsPreviousExon": this.data.firstAminoAcid.code.substring(0, firstPhase)
                    }

                    this.lastTranslatedAminoAcid = {
                        "codonNucsCurrentExon":  (lastPhase === 0) ? this.data.lastAminoAcid.code : this.data.lastAminoAcid.code.substring(0, lastPhase),
                        "codonNucsNextExon": (lastPhase === 0) ? "" : this.data.lastAminoAcid.code.substring(lastPhase)
                    }
                }
            }
        });
    </script>
</dom-module>