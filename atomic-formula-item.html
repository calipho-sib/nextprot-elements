<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="term-overview-section.html">
<link rel="import" href="graph-section.html">
<link rel="import" href="nextprot-elements-shared-styles.html">
<link rel="import" href="term-overview-section.html">

<!--
`atomic-formula-item-demo`
@demo demo/atomic-formula-item-demo.html
-->
<dom-module id="atomic-formula-item">
    <template>
        <style include="nextprot-elements-shared-styles">
            .atomic-number {
                vertical-align: sub;
                font-size: smaller;
                margin-left: -3px;
            }
            .atomic-letter {
               margin-left: -3px;
            }

            .errorcomment {
                font-size: 9px;
                color: orange;
            }


        </style>
        <template class="formula-container" is="dom-repeat" items="[[resultElements]]" as="re">
            <template is="dom-if" if="[[re.isNumber]]">
                    <span class="atomic-number">[[re.label]]</span>
            </template>
            <template is="dom-if" if="[[!re.isNumber]]">
                    <span class="atomic-letter">[[re.label]]</span>
            </template>
        </template>
        <span class="errorcomment">should we had + for positive numbers, since it is a correction... ?</span>
    </template>

    <script>
        Polymer({
            is: 'atomic-formula-item',
            properties: {
                formula: {
                    type: String
                },
                resultElements: {
                    type: Array
                }
            },
            ready: function (){
                function isNum(n){
                    return ('0123456789-+'.indexOf(n) !== -1)
                };
                var result = [];
                var elements = this.formula.split("")
                var elements = elements.filter(function(a){return a !== ' '})
                for(var i=0; i<elements.length; i++){
                    var e = elements[i];
                    var isNumber = isNum(e);
                    result.push({isNumber: isNumber, label: e})
                }
                this.resultElements = result; 
            }
        });
    </script>
</dom-module>