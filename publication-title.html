<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="nextprot-elements-shared-styles.html">
<!--
`publication-title`
Publication title item demo

@demo demo/publication-title-demo.html
-->
<dom-module id="publication-title">
    <template>
        <style include="nextprot-elements-shared-styles">
            :host {
                display: block;
            }

            .title-link {
                color: #0F82BA;
            }
        </style>
        <template is="dom-if" if="[[title]]">
            <input type="button" value="Click me" on-click="_onClick">
            <div>
                <template is="dom-if" if="[[linkId]]">
                    <a class="title-link" href="/publication/[[linkId]]" target='_parent'>[[title]]</a>
                </template>
                <template is="dom-if" if="[[!linkId]]">
                    <strong>[[title]]</strong>
                </template>
            </div>
        </template>

    </template>
    <script>
        Polymer({
            is: 'publication-title',
            properties: {
                title: {
                    type: String,
                    value: ""
                },
                linkId: {
                    type: String,
                    value: ""
                }
            },
             _onClick: function() {

                var invocation = new XMLHttpRequest();
                var url = 'http://build-api.nextprot.org/entry-publications/entry/NX_P01308/count.json';
                //invocation.onreadystatechange = _myHandler;
                invocation.onreadystatechange = function() {
                       // Typical action to be performed when the document is ready:
                       console.log('readyState', this.readyState);
                       console.log('status', this.status);
                       console.log('responseText',invocation.responseText);
                };

                invocation.open('GET', url, true);
                invocation.send(); 

                //alert('Hi');
            }
        });
    </script>
</dom-module>
